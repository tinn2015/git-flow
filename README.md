https://blog.csdn.net/u012562943/article/details/79754587
# git-flow

## 1. 什么是git-flow?
git-flow 是基于git的工作流程
git flow是一套基于git的工作流程。Git flow 可以工作在 OSX, Linux 和 Windows之下。这个工作流程围绕着project的发布(release)定义了一个严格的如何建立分支的模型。git-flow 并不是要替代 Git，它仅仅是非常聪明有效地把标准的 Git 命令用脚本组合了起来。
    严格来讲，你并不需要安装什么特别的东西就可以使用 git-flow 工作流程。你只需要了解，哪些工作流程是由哪些单独的任务所组成的，并且附带上正确的参数，以及在一个正确的顺序下简单执行那些对应的 Git 命令就可以了。当然，如果你使用 git-flow 脚本就会更加方便了，你就不需要把这些命令和顺序都记在脑子里。
原理：流程仍然使用一个中央代码仓库，它是所有开发者的信息交流中心。跟其他的工作流程一样，开发者在本地完成开发，然后再将分支代码推送到中央仓库。唯一不同的是项目中分支的结构。

## 2.这样的好处
* 还处于半成品状态的feature不会影响到主干
* 各个开发人员之间做自己的分支，互不干扰
* 主干永远处于可编译、可运行的状态

## 3. git-flow中的分支
### （1）主分支：
![主分支](/imgs/1.png)
* master分支 
master分支上的代码是可以随时发布到生存环境中的代码(production-ready)，每次提交到master的代码都必须打上标签标示版本号。master分支的操作权限应该由专门的人负责。
* develop分支  
我们称为开发分支，又称集成分支(integration branch)，辅助分支完成自己的开发之后都会合并到develop分支，确定要把当前已经集成的功能发布一个版本的时候，就需要把devlop分支合并到master分支（下面会介绍中间其实还有一个release分支），并打上带版本号的标签。

### （2）功能开发的分支 Feature
每一个新功能的开发都应该各自使用独立的分支。为了备份或便于团队之间的合作，这种分支也可以被推送到中央仓库。但是，在创建新的功能开发分支时，父分支应该选择develop（而不是master）。当功能开发完成时，改动的代码应该被合并（merge）到develop分支。功能开发永远不应该直接牵扯到master。
![主分支](/imgs/2.png)

### （3）用于发布的分支 Release
一旦develop分支积聚了足够多的新功能（或者预定的发布日期临近了），你可以基于develop分支建立一个用于产品发布的分支。这个分支的创建意味着一个发布周期的开始，也意味着本次发布不会再增加新的功能——在这个分支上只能修复bug，做一些文档工作或者跟发布相关的任务。在一切准备就绪的时候，这个分支会被合并入master，并且用版本号打上标签。另外，发布分支上的改动还应该合并入develop分支——在发布周期内，develop分支仍然在被使用（一些开发者会把其他功能集成到develop分支）。使用专门的一个分支来为发布做准备的好处是，在一个团队忙于当前的发布的同时，另一个团队可以继续为接下来的一次发布开发新功能。
![主分支](/imgs/3.png)

### （4）用于维护的分支 Hotfix
发布后的维护工作或者紧急问题的快速修复也需要使用一个独立的分支。这是唯一一种可以直接基于master创建的分支。一旦问题被修复了，所做的改动应该被合并入master和develop分支（或者用于当前发布的分支）。在这之后，master上还要使用更新的版本号打好标签。
![主分支](/imgs/4.png)



## 4. 
我们能看到feature branch最明显的两个好处是：

各个feature之间的代码是隔离的，可以独立地开发、构建、测试；
当feature的开发周期长于release周期时，可以避免未完成的feature进入生产环境。
## merge成本问题
合并冲突在使用 Git Flow 是非常常见。原因很简单：如果你有多个并行功能分支，他们长时间存在，那么很可能在代码库的相同部分在两个不同的分支中被更改。合并冲突不仅对于需要手动解决的开发人员来说是令人沮丧的。这也增加了在代码中破坏某些功能的风险，因为当你不得不决定使用哪个版本代码时，很容易犯错。即使你把一个分支合并到另一个分支时你做的都是正确的，可能也会发生这两个特性的组合影响了你的代码。
**<u>这种不可预测的冲突和影响，将会导致发布时间不可预测。</u>**
## 
## 持续集成问题
要解决以上问题，我们就得持续集成dev分支的代码，这得确保不同feature分支及时的将功能合并到dev分支。问题是两个feature的开发周期都很长，导致这两个feature都长时间集成不到对方的功能，产生merge成本问题。
## 测试问题
持续测dev分支，还是测每次要发布的release分支

## 我们的项目
由于我们的团队人员较少，沟通方便，完全按照git-flow的流程稍显复杂。  
1. 一天能完成的功能，不需要的建立feature分支，直接在dev分支上进行修改，提交。
2. 开发周期较长，较为独立的功能，在feature分支中进行。注意在开发周期内持续集成dev分支中的功能。
3. dev分支中待发布功能都已集成时，或者大部分集成时，拉出release分支，提交测试。然后有需要的话，及时往release分支集成。

## git-flow 演示
可以基于git flow 命令，也可以直接用git 命令

## 其他工作流
* Trunk Based Development
* GitHub Flow
* GitLab Flow

